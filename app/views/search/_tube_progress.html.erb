<ul id="ongoing_tubes" data-role="listview" data-theme="d" data-filter="true" data-filter-placeholder="Filter tubes..." data-inset="true" class="list-group">
  <% labware_by_state(tubes).each do |state, sorted_tubes| -%>
    <li data-role="list-divider" class="list-group-item list-group-item-<%= state_style(state) %>"><%= state.titleize %></li>
    <% sorted_tubes.each do |tube| -%>
      <li class="list-group-item list-group-item-action">
      <%= link_to(tube, id: "tube_#{tube.barcode.ean13}", class: "list-group-item-action") do %>
        <h3 class="barcode list-group-item-heading"><%= useful_barcode(tube.barcode) %> <span class="badge badge-<%= state_style(tube.state) %>"><%= tube.state.titleize %></span></h3>
        <% if tube.stock_plate %>
          <p class="list-group-item-text">
            <span class="field-description">Input plate:</span>
            <%= useful_barcode(tube.stock_plate.barcode) %>
          </p>
        <% end %>
        <dl class="list-inline">
          <dt class="list-inline-item">Created</dt><dd class="list-inline-item"><%= tube.created_at.to_formatted_s(:date_created) %></dd>
          <dt class="list-inline-item">Type</dt><dd class="list-inline-item"><%= tube.purpose.name %></dd>
        </dl>
      <% end -%>
      </li>
    <% end -%>
  <% end -%>

  <% if tubes.empty? -%>
    <li>
      <h2><i>No tubes found.</i></h2>
    </li>
  <% end -%>
</ul>
